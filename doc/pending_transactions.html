<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Module pending_transactions</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module pending_transactions</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>container handling pending transactions.


<h2><a name="description">Description</a></h2><p>container handling pending transactions.</p>
 
  <p>Transactions can come out of order.  
Newer transactions rewrite older ones.  
This structure allows purge of old transactions,  
to control the size of the buffer, however,  
it is not implemented here.</p>
 
  Also, as implemented, there is a replay attack where a two user's transactions
  with same nonces are kept being sent alternatively, forcing that user's
  transactions in the end. This can be fixed by having the user
  send timestamp with his transactions and then only rewrite transactions
  for which timestamp goes up.
  (or implement handshake to prevent replays)
<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#add_transaction-2">add_transaction/2</a></td><td>Adds new transaction to the container.</td></tr>
<tr><td valign="top"><a href="#get_pending_players-1">get_pending_players/1</a></td><td>Get list of all the players for which there are pending transactions.</td></tr>
<tr><td valign="top"><a href="#get_pending_transactions-2">get_pending_transactions/2</a></td><td>Returns pending transactions in the correct order.</td></tr>
<tr><td valign="top"><a href="#init-0">init/0</a></td><td>Initialize the container.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="add_transaction-2">add_transaction/2</a></h3>
<div class="spec">
<p><tt>add_transaction(Transaction, PendingTx) -&gt; any()</tt></p>
</div><p><p>Adds new transaction to the container.</p>
 
  Updates counters on later transactions.
  Returns {Container, message} where message is
  ignored_duplicate, updated_old, added_new</p>

<h3 class="function"><a name="get_pending_players-1">get_pending_players/1</a></h3>
<div class="spec">
<p><tt>get_pending_players(Pending_tx) -&gt; any()</tt></p>
</div><p>Get list of all the players for which there are pending transactions.</p>

<h3 class="function"><a name="get_pending_transactions-2">get_pending_transactions/2</a></h3>
<div class="spec">
<p><tt>get_pending_transactions(PlayersStartingNonceMap, PendingTx) -&gt; any()</tt></p>
</div><p><p>Returns pending transactions in the correct order.</p>
 
  <p>For each player P, transactions will start at PlayersStartingNonceMap[P]  
and will have consecutive nonces (no gaps).</p>
 
  Transactions for players not in PlayersStartingNonceMap will be ignored.</p>

<h3 class="function"><a name="init-0">init/0</a></h3>
<div class="spec">
<p><tt>init() -&gt; any()</tt></p>
</div><p>Initialize the container.</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc</i></p>
</body>
</html>
